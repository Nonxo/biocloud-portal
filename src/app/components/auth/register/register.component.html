<form class="pt-4" [formGroup]="form" (submit)="register()" ngNativeValidate>

    <div class="container-fluid">
        <div class="row">

            <!--<div class="col-md-12">
        <div>
          <small>Register As:</small>
        </div>
        <div class="btn-group curve mb-3">
          <label class="btn btn-md" *ngFor="let userType of userTypes; let idx=index"
                 [ngClass]="{'btn-primary': userType.checked}">
            <input type="radio" autocomplete="off" name="whoToggle" [checked]="userType.checked" [value]="userType.name" (click)="changeUserType(idx)">
            {{userType.name}}
          </label>
        </div>
      </div>-->

            <div class="col-12" *ngIf="company">
                <mat-form-field class="input-field">
                    <input matInput placeholder="Company Name" formControlName="companyName">
                </mat-form-field>
            </div>

            <div class="col-6">
                <mat-form-field class="input-field">
                    <input matInput placeholder="First Name" pattern="[A-Za-z0-9\-]*" formControlName="fName" required>
                    <mat-error *ngIf="form.get('fName')?.errors"><small>No special characters allowed</small></mat-error>
                </mat-form-field>
            </div>

            <div class="col-6">
                <mat-form-field class="input-field">
                    <input matInput placeholder="Last Name" pattern="[A-Za-z0-9\-]*" formControlName="lName" required>
                    <mat-error *ngIf="form.get('lName')?.errors"><small>No special characters allowed</small></mat-error>
                </mat-form-field>
            </div>

            <div class="col-12">
                <div class="row">
                    <div class="{{selectedCountryCode? 'col-md-3 col-6 flag-col':'col-md-3'}}">
                        <div class="position-absolute pt-3">
                            <i *ngIf="selectedCountryCode" class="sprite {{selectedCountryCode.toLowerCase()}}">
                            <!-- <img class="flag-img"  src="{{baseUrl}}/as/flags/{{selectedCountryCode.toLowerCase()}}.png"> -->
                        </i>
                        </div>
                        <mat-form-field class="input-field">
                            <mat-select placeholder="" name="phoneCode" formControlName="phoneCode" (change)="onSelectChange()" (openedChange)="openc($event)">

                                <mat-form-field class="input-field sticky-search">
                                    <input class="myInput" (keydown)="$event.stopPropagation()" #myInput matInput focused="'true'" type="text" (keyup)="search($event.target.value)" autocomplete="off" placeholder="Search">
                                </mat-form-field>

                                <mat-option [hidden]="true" value=""></mat-option>

                                <mat-option *ngFor="let country of filteredCountries" value="{{country.code}}">
                                    <!-- <img style="width: 40px; height: 30px" src="{{baseUrl}}/as/flags/{{country.code.toLowerCase()}}.png"> {{country.name}} -->
                                    <div><i class="sprite {{country.code.toLowerCase()}} d-inline-flex mr-2"></i>{{country.name}}</div>
                                </mat-option>

                                <p *ngIf="filteredCountries.length == 0" class="text-center small text-muted">No result(s) found</p>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="col-md-2 col-6 pl-lg-0 text-center pl-3 pl-0 pr-0 my-auto pt-3 text-muted">
                        <p>{{selectedPhoneCode.charAt(0) == "+"? selectedPhoneCode: "+" + selectedPhoneCode}}</p>
                    </div>

                    <div class="col-md-7">
                        <mat-form-field class="input-field">
                            <input matInput placeholder="Phone number" pattern="[0-9]{5,20}" formControlName="phone" required>
                            <mat-error *ngIf="form.get('phone')?.errors">
                                <small>Must be between 5-20 digits</small>
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <mat-form-field class="input-field">
                    <input matInput placeholder="Email" pattern="[^@\s]+@[^@\s]+\.[^@\s]+" formControlName="email" required>
                </mat-form-field>
            </div>

            <div class="col-12">
                <mat-form-field class="input-field">
                    <input matInput placeholder="Password" pattern="^([a-zA-Z0-9 @*#]{6,20})" [type]="show ? 'text' : 'password'" formControlName="password" required>
                    <mat-icon matSuffix (click)="show = !show">{{show ? 'visibility_off' : 'visibility'}}</mat-icon>
                    <mat-error *ngIf="form.get('password')?.errors"><small>Password must be at least 6 characters</small></mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-12">
                <mat-checkbox formControlName="gdprCompliance">
                </mat-checkbox>
                <span class="small pl-2">I agree to the <span (click)="goToTerms()" class="cursor text-brand">Terms of
                        Service</span> and Privacy Policy</span>
            </div>

            <div class="col-md-6 col-12">
                <re-captcha #cap (resolved)="resolved($event)" siteKey="{{recaptchaSiteKey}}"></re-captcha>
            </div>



            <div class="col-md-12 mt-3">
                <button mat-raised-button color="primary" class="px-4 py-1" type="submit">
                    REGISTER
                    <img *ngIf="loading" src="assets/img/loading.gif" style="max-width: 20px;" />
                </button>
            </div>
        </div>
    </div>

</form>

<div class="col-12 text-xl-left text-center">
    <!--<div class="cursor" id="googleBtn">Google</div>-->
    <!--<p class="hr">or</p>-->
    <img src="assets/img/or.png" class="img-fluid or w-75" />

</div>
