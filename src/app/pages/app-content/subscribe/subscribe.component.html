<div class="container-fluid">
    <div class="row">
        <div class="col-lg-9 col-md-7 p-0 mt-3">
            <div class="row m-3 justify-content-center">

                <div class="col-md-12">
                    <div class="row">
                        <div class="col-lg-8 col-md-12 text-lg-left text-md-center text-center">
                            <h5 class="text-capitalize text-brand pt-3">Choose a plan that works for you</h5>
                        </div>
                        <div class="col-lg-4 col-md-12 text-lg-right text-md-center  text-center">
                            <!-- Monthly
                            <mat-slide-toggle> Yearly (20% OFF)</mat-slide-toggle> -->
                            <mat-form-field>
                                <mat-select placeholder="Select Currency" name="selectedCurrency" [(ngModel)]="selectedCurrency" (change)="onChange()">
                                    <mat-option select value="NGN">NGN</mat-option>
                                    <mat-option select *ngFor="let e of exchangeRates" value="{{e.target}}">{{e.target}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>

                    <!-- <h5 class="text-capitalize text-brand">Choose a plan that works for you</h5> -->
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer sed elit vitae magna ornare ornare. Curabitur lacus magna, ultricies ultrices ultricies venenatis, dapibus ut libero.</p>
                    <div>
                        Yearly ({{discountRate}}% OFF)
                        <mat-slide-toggle name="durationToggle" [(ngModel)]="monthlyPlan"> Monthly </mat-slide-toggle>
                    </div>
                </div>

                <!-- <div>
                    Monthly
                    <mat-slide-toggle> Yearly (20% OFF)</mat-slide-toggle>
                </div> -->

                <div class="col-lg-4 col-md-12  col-12 pt-5 p-0 p-md-3 text-center" *ngFor="let plan of subscriptionPlans">
                    <mat-card class="py-lg-5 p-md-2 p-3 subscribe-plan  text-white">

                        <h1>{{plan.name}}</h1>
                        <h4 class="py-3">
                            <!--{{monthlyPlan? (plan.pricePerMonth | currency:'NGN':'symbol-narrow':'4.0'):(plan.pricePerAnnum | currency:'NGN':'symbol-narrow':'4.0')}}-->
                            {{getPrice(plan) | currency:selectedCurrency:'symbol-narrow':'1.0'}}
                        </h4>

                        <ul class="list-group">
                            <li class="list-group-item  border-0">Ultimate Features</li>
                            <li class="list-group-item  border-0">Responsive Ready</li>
                            <li class="list-group-item  border-0">Visual Composer Included</li>
                            <li class="list-group-item  border-0">24/7 Support System</li>
                        </ul>
                        <!-- <div class="mt-5">
                            <mat-checkbox>Go Yearly(10% Off)</mat-checkbox>
                            Monthly
                            <mat-slide-toggle> Yearly (20% OFF)</mat-slide-toggle>
                        </div> -->
                        <button mat-raised-button color="primary" class="px-4 py-2 mt-4" (click)="confirmPayment(plan, confirmPaymentTemplate)">SUBSCRIBE</button>
                    </mat-card>
                </div>

            </div>
        </div>
        <div class="col-lg-2 ml-auto col-md-5 p-0 d-none d-md-block sidebar sticky-right bg-brand">
            <carousel class="h-100">
                <slide class="h-100">
                    <img src="assets/img/testimonial-2.png" alt="First slide" style="display: block; width: 100%;">
                    <div class="carousel-caption text-black">
                        <h3>CEO Hitman LTD</h3>
                        <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
                    </div>
                </slide>
                <slide class="h-100">
                    <img src="assets/img/testimonial.png" alt="First slide" style="display: block; width: 100%;">
                    <div class="carousel-caption text-black">
                        <h3>CEO Nereus LTD</h3>
                        <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
                    </div>
                </slide>
            </carousel>
        </div>
    </div>
</div>

<ng-template #confirmPaymentTemplate>
    <!-- <div class="modal-header">
        <h4 class="modal-title text-brand text-center">Subscription Details</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div> -->
    <div class="modal-body">
        <h5 class="modal-title text-brand text-center pb-2">Subscription Details</h5>
        <p class="text-center pl-lg-5 pr-lg-5">Thank you for deciding to subscribe to iClocker. Please find below details of your plan.</p>

        <div class="pl-lg-5 pr-lg-5">
            <p class=""><span class="text-brand font-weight-bold">Plan</span><br>{{selectedPlan.name}}</p>
            <p class=""><span class="text-brand font-weight-bold">Subscription Type</span><br>{{monthlyPlan? 'Monthly':'Yearly'}}</p>
            <p class=""><span class="text-brand font-weight-bold">Amount</span><br>{{getPrice(selectedPlan) | currency:selectedCurrency:'symbol-narrow':'2.0'}}</p>

            <hr>

            <div class="p-0 row col-md-12">
                <div class="col-md-7">
                    <p class="text-brand font-weight-bold">Sub Total</p>
                </div>
                <div class="col-md-5">
                    <p>{{getPrice(selectedPlan) | currency:selectedCurrency:'symbol-narrow':'2.0'}}</p>
                </div>
                <div class="col-md-7">
                    <p class="text-brand font-weight-bold">Special Offer({{monthlyPlan? 0:discountRate}}% off)</p>
                </div>
                <div class="col-md-5">
                    <p>{{discountPrice | currency:selectedCurrency:'symbol-narrow':'1.0'}}</p>
                </div>
            </div>

            <hr>
            <div class="p-0 row col-md-12">
                <div class="col-md-7">
                    <p class="text-brand font-weight-bold">Total</p>
                </div>
                    <div class="col-md-5">
                    <p>{{amountToPay | currency:selectedCurrency:'symbol-narrow':'1.0'}}</p>
                </div>
            </div>

            <div class="text-center pt-3 pb-2">
                <mat-checkbox class="text-secondary" name="renew" [(ngModel)]="renewSub">Always auto renew my subscription</mat-checkbox>
            </div>

            <div class="col-md-12 mt-3 text-center mb-4">
                <button mat-raised-button class="px-4 primary-outline py-1" type="button" (click)="modalRef.hide()">CANCEL</button>
                <button mat-raised-button color="primary" class="px-4 primary-outline py-1 mr-2" (click)="subscribe(selectedPlan)">Continue to Payment</button>
            </div>

        </div>

    </div>
</ng-template>